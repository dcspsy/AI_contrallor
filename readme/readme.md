使用数据

1.路口十六向流量 (时间6时~23时,粒度八分钟) flow
2.路口各相位配时 (时间6时~23时,粒度八分钟) stage


路口评价
路口每个周期存在四个方案(东西直行\东西左转\南北直行\南北左转),每个相位允许只相应方向的车流通行,由此计算分别计算每个相位中放行车辆的平均行驶时间 
time[i] = stage[i]/flow[i]当放行效率最大时,相位时长分配给最多的车辆,即time[i] 取最小值时该相位的放行效率最大.(用最小值计算效果不好,此次应用30%位的数据)
用当前路口每个相位中放行车辆的平均行驶时间和最小时长的差异(是否要加权)来评价路口当前方案.
def reward(delay_data):

    x = np.abs(delay_data - min_delay)
    x = np.sum(x, axis=1)
    return 1/(1+np.e**x)


动作选取
次第计算stage前后两天的差作为可能出现的动作库 actions. stage_ = stage + action 作为相位配时的优化方案.reward最大的action 并返回动作和奖励值.(此处未限制最大周期,最小周期的大小)

